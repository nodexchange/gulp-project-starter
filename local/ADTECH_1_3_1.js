/*!
 * Cross-Browser DOM Ready code extracted from jQuery.
 *
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
var ADTECHDomReady=function(){var a=!1,b=function(b){var c=function(){return a?void 0:(a=!0,b())},d=function(){if(!a){try{document.documentElement.doScroll("left")}catch(b){return void setTimeout(d,1)}return c()}};if("complete"===document.readyState)return c();if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",c),window.attachEvent("onload",c);var e=!1;try{e=null==window.frameElement}catch(f){}if(document.documentElement.doScroll&&e)return d()}};return b}(),com=com||{};com.adtech=com.adtech||{},"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),com.adtech.RichMediaEvent=function(a){this.type=a,this.target=null,this.currentTarget=null},com.adtech.RichMediaEvent.DOM_LOAD="DOMLoad",com.adtech.RichMediaEvent.ENGAGEMENT="engagement",com.adtech.RichMediaEvent.VIEWABLE_IMPRESSION="viewableImpression",com.adtech.RichMediaEvent.INTERACTIVE_IMPRESSION="interactiveImpression",com.adtech.RichMediaEvent.VIDEO_IMPRESSION="videoImpression",com.adtech.RichMediaEvent.QUALIFIED_ROLLOVER="qualifiedRollover",com.adtech.RichMediaEvent.BACKUP_VIEW="backupView",com.adtech.RichMediaEvent.UNSUPPORTED_CLIENT="unsupportedClient",com.adtech.RichMediaEvent.BACKUP_VIEWABLE_IMPRESSION="backupViewableImpression",com.adtech.RichMediaEvent.INDETERMINABLE_VIEWABILITY="indeterminableViewability",com.adtech.RichMediaEvent.MOUSE_MOVE="mouseMove",com.adtech.RichMediaEvent.MOUSE_OUT="mouseOut",com.adtech.RichMediaEvent.MOUSE_OVER="mouseOver",com.adtech.RichMediaEvent.PAGE_LOAD="pageLoad",com.adtech.RichMediaEvent.PAGE_SCROLL="pageScroll",com.adtech.RichMediaEvent.BLUR="blur",com.adtech.RichMediaEvent.ORIENTATION_CHANGE="orientationChange",com.adtech.RichMediaEvent.TOUCH_START="touchStart",com.adtech.RichMediaEvent.FOCUS="focus",com.adtech.RichMediaEvent.RENDER="render",com.adtech.RichMediaEvent.REPORT="reporting",com.adtech.RichMediaEvent.PAGE_RESIZE="pageResize",com.adtech.RichMediaEvent.SERVE="serve",com.adtech.RichMediaEvent.IN_VIEWPORT="inViewport",com.adtech.RichMediaEvent.OUT_VIEWPORT="outViewport",com.adtech.RichMediaEvent.EXPANDED="ADTECH.expanded",com.adtech.RichMediaEvent.CONTRACTED="ADTECH.contracted",com.adtech.RichMediaEvent.LOADED="ADTECH.loaded",com.adtech.RichMediaEvent.CLOSE="close",com.adtech.RichMediaEvent.HIDE="hide",com.adtech.RichMediaEvent.SHOW="show",com.adtech.RichMediaEvent.READY="ready",com.adtech.RichMediaEvent.ERROR="error",com.adtech.RichMediaEvent.MRAID_READY="MRAIDReady",com.adtech.RichMediaEvent.MRAID_ERROR="MRAIDError",com.adtech.RichMediaEvent.MRAID_VIEWABLE_CHANGE="viewableChange",com.adtech.RichMediaEvent.MRAID_STATE_CHANGE="stateChange",com.adtech.RichMediaEvent.MRAID_KEYBOARD_CHANGE="keyboardChange",com.adtech.RichMediaEvent.MRAID_LOCATION_CHANGE="locationChange",com.adtech.RichMediaEvent.MRAID_HEADING_CHANGE="headingChange",com.adtech.RichMediaEvent.MRAID_NETWORK_CHANGE="networkChange",com.adtech.RichMediaEvent.MRAID_ORIENTATION_CHANGE="orientationChange",com.adtech.RichMediaEvent.MRAID_SCREEN_CHANGE="screenChange",com.adtech.RichMediaEvent.MRAID_SIZE_CHANGE="sizeChange",com.adtech.RichMediaEvent.MRAID_TILT_CHANGE="tiltChange",com.adtech.RichMediaEvent.MRAID_SHAKE="shake",com.adtech.RichMediaEvent.MRAID_RESPONSE="response",com.adtech.RichMediaEvent.CONFIG_CHANGE="ADTECH.configChange",com.adtech.RichMediaEvent.DYNAMIC="PICTELA.dynamic",com.adtech.RichMediaEvent.prototype.property=function(a,b){return"type"!=a&&"target"!=a&&(this[a]=b),this},com.adtech.EventDispatcher=function(){this.eventTypes={}},com.adtech.EventDispatcher.prototype.addEventListener=function(a,b,c){"undefined"==typeof this.eventTypes[a]&&(this.eventTypes[a]=[]),com.adtech.Utils.inArray(b,this.eventTypes[a])||this.eventTypes[a].push("undefined"==typeof c?b:{ref:c,handler:b})},com.adtech.EventDispatcher.prototype.removeEventListener=function(a,b,c){if("undefined"!=typeof this.eventTypes[a])for(var d=this.eventTypes[a].length,e=0;d>e;e++){var f=this.eventTypes[a][e],g="undefined"==typeof c?"function":"object";if(g==typeof f)switch(g){case"function":f==b&&this.eventTypes[a].splice(e,1);break;case"object":f.handler==b&&f.ref==c&&this.eventTypes[a].splice(e,1)}}},com.adtech.EventDispatcher.prototype.dispatchEvent=function(a){if("string"==typeof a&&(a=new com.adtech.RichMediaEvent(a)),"string"==typeof a.type&&"undefined"!=typeof this.eventTypes[a.type]){("undefined"==typeof a.target||null===a.target)&&(a.target=this),a.currentTarget=this;for(var b=this.eventTypes[a.type].slice(0),c=0;c<b.length;c++){var d=b[c];"object"==typeof d?d.handler.call(d.ref,a):d(a)}}},com.adtech.Utils={},com.adtech.Utils.registerNativeEventHandler=function(a,b,c){com.adtech.Utils.removeNativeEventHandler(a,b,c),"function"==typeof a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},com.adtech.Utils.removeNativeEventHandler=function(a,b,c){"function"==typeof a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},com.adtech.Utils.createClosure=function(a,b){var c=[].slice.call(arguments,2),d=function(){var a=arguments.callee,b=[].slice.call(arguments),c=a.extraArgs.concat(b,[a]);return a.handler.apply(a.target,c)};return d.extraArgs=c,d.target=a,d.handler=b,d},com.adtech.Utils.getQueryStringVariable=function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}return null},com.adtech.Utils.inArray=function(a,b){for(var c in b)if(b[c]==a)return!0;return!1},com.adtech.Utils.extend=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.supa=b.prototype,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)},com.adtech.Utils.getViewportDims=function(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return{w:a,h:b}},com.adtech.Utils.isArray=function(a){return"array"==Object.prototype.toString.call(a).slice(8,-1).toLowerCase()},com.adtech.Advert=com.adtech.Advert||function(){},com.adtech.Advert.ENGAGEMENT_THRESHOLD=2e3,com.adtech.Advert.QUALIFIED_ROLLOVER_THRESHOLD=500,com.adtech.Advert.VIEWABLE_IMPRESSION_THRESHOLD=1e3,com.adtech.Advert.MOUSE_OVER_TIMERS_FLUSH_TIMEOUT=1e3,com.adtech.Advert.TIMER_LOGGING_THRESHOLD=9e5,com.adtech.Advert.INPAGE_UNIT_CHECK_INTERVAL=1e3,com.adtech.Advert.TRACK_TYPE_PIXEL="1_PIXEL",com.adtech.Advert.TRACK_TYPE_JS="JS_URL",com.adtech.Advert.TRACK_TYPE_REDIRECT="REDIRECT_URL",com.adtech.Advert.TRACK_EVENT_VIEW="VIEW",com.adtech.Advert.TRACK_EVENT_INTERACTION="INTERACTION",com.adtech.Advert.TRACK_EVENT_SPECIFIC_EVENT="SPECIFIC_EVENT",com.adtech.Advert.TRACK_EVENT_SPECIFIC_CLICK="SPECIFIC_CLICK",com.adtech.Advert.TRACK_EVENT_CLICKS_ALL="CLICKS_ALL",com.adtech.Advert.TRACK_EVENT_ALL="EVENTS_ALL",com.adtech.Advert.TRACK_EVENT_INTERACTIONS_ALL="INTERACTIONS_ALL",com.adtech.Advert.DISPLAY_TIMER="displayTimer",com.adtech.Advert.VIEW_TIMER="viewTimer",com.adtech.Advert.ENGAGEMENT_TIMER="engagementTimer",com.adtech.Advert.INTERACTION_TIMER="interactionTimer",com.adtech.Advert.EXPANSION_TIMER="expansionTimer",com.adtech.Advert.DEFAULT_CLICK="default",com.adtech.Advert.BACKUP_CLICK="backupImageClickthrough",com.adtech.Advert.ALT_TEXT_VARIABLE_KEY="Backup Alt Text",com.adtech.Advert.ACTION_TARGET_SELF="self",com.adtech.Advert.ACTION_TARGET_WILDCARD="*",com.adtech.Advert.MACRO_AD_TIME="_ADTIME_",com.adtech.Advert.MACRO_TIMESTAMP="_TIMESTAMP_",com.adtech.Advert.CONFIG_TRACKING_MACROS_KEY="trackingMacros",com.adtech.Advert.BUYSIGHT_KEY="buysightDataKey",com.adtech.Advert.CONTENT_SEPARATOR=": ",com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY="Tracking Id",com.adtech.Advert.CONTENT_PROPERTY_PARENT_TRACKING_KEY="Parent Tracking Id",com.adtech.Advert.VIDEO_EVENT_VIEW="Video View",com.adtech.Advert.VIDEO_EVENT_START="Video Start",com.adtech.Advert.VIDEO_EVENT_RESUME="Video Resume",com.adtech.Advert.VIDEO_EVENT_REPLAY="Video Replay",com.adtech.Advert.VIDEO_EVENT_PAUSE="Video Pause",com.adtech.Advert.VIDEO_EVENT_PLAY="Video Play",com.adtech.Advert.VIDEO_EVENT_COMPLETE="Video Complete",com.adtech.Advert.OPT_TRACKING_KEYS={creativeId:"kvu.3rd-creative",placementId:"kvu.3rd-plc"},com.adtech.HtmlContent=com.adtech.HtmlContent||function(){},com.adtech.HtmlContent.CMD_TYPE_DISPATCH="dispatch",com.adtech.HtmlContent.CMD_TYPE_EXEC="exec",com.adtech.HtmlContent.CMD_TYPE_INIT="init",com.adtech.HtmlContent.CMD_TYPE_MRAID="CMD_MRAID",com.adtech.HtmlContent.PROPERTY_DELIM="A$T$P",com.adtech.HtmlContent.OBJECT_DELIM="A#T#O",com.adtech.HtmlContent.KEY_VALUE_DELIM="#:#",com.adtech.HtmlContent.ENVIRONMENT_WEB="WEB",com.adtech.HtmlContent.ENVIRONMENT_MRAID="MRAID",com.adtech.HtmlContent.ENVIRONMENT_ORMMA="ORMMA",com.adtech.Core=function(){com.adtech.Core.supa.constructor.call(this),this.rmLibVersion=null,this.readyCallbacks=[],this.initialised=!1,this.configLoaded=!1,this.domLoaded=!1,this.dataFeedRequestQueue=[],this.dataFeedRequestInProcess=!1,this.macroMap={},this.mouseX=-1,this.mouseY=-1,this.mraid=new com.adtech.MRAID(this),this.init()},com.adtech.Utils.extend(com.adtech.Core,com.adtech.EventDispatcher),com.adtech.Core.VIDEO_CONTENT_EVENT_SEPARATOR=":",com.adtech.Core.prototype.init=function(){ADTECHDomReady(com.adtech.Utils.createClosure(this,this.domLoadHandler)),this.pageLoaded=null!=com.adtech.Utils.getQueryStringVariable("pageLoaded")?!0:!1,this.addPostMessageListener(),this.sendMessage(this.constructMessage(com.adtech.HtmlContent.CMD_TYPE_INIT)),this.addTouchStartListener()},com.adtech.Core.prototype.setMacroMap=function(){var a=this.adConfig.tagVars[com.adtech.Advert.CONFIG_TRACKING_MACROS_KEY];if("object"==typeof a)for(var b in a)a.hasOwnProperty(b)&&(this.macroMap["##"+b+"##"]=a[b]);this.macroMap[com.adtech.Advert.MACRO_AD_TIME]=this.adConfig.adServerVars.uid},com.adtech.Core.prototype.addPostMessageListener=function(){com.adtech.Utils.registerNativeEventHandler(window,"message",com.adtech.Utils.createClosure(this,this.postMessageHandler))},com.adtech.Core.prototype.addTouchStartListener=function(){this.touchStartHandlerRef=com.adtech.Utils.createClosure(this,this.touchStartHandler),com.adtech.Utils.registerNativeEventHandler(window.document,"touchstart",this.touchStartHandlerRef)},com.adtech.Core.prototype.addMouseMoveListener=function(){this.mouseMoveHandlerClosure=com.adtech.Utils.createClosure(this,this.mouseMoveHandler),com.adtech.Utils.registerNativeEventHandler(document,"mousemove",this.mouseMoveHandlerClosure)},com.adtech.Core.prototype.removeMouseMoveListener=function(){this.mouseMoveHandlerClosure&&com.adtech.Utils.removeNativeEventHandler(document,"mousemove",this.mouseMoveHandlerClosure)},com.adtech.Core.prototype.sendMessage=function(a){parent.postMessage(a,"*")},com.adtech.Core.prototype.constructMessageKeyValuePair=function(a,b){return a+com.adtech.HtmlContent.KEY_VALUE_DELIM+b+com.adtech.HtmlContent.PROPERTY_DELIM},com.adtech.Core.prototype.constructMessage=function(a,b){var c=a;if(void 0!=b){var d="string"==typeof b?b:JSON.stringify(b);c+=com.adtech.HtmlContent.OBJECT_DELIM+d}return c},com.adtech.Core.prototype.constructMessageObject=function(a){var b={},c=a.split(com.adtech.HtmlContent.OBJECT_DELIM);if(b.cmd=c[0],this.useJSONMessageSerialisation()||c.length>1&&0==c[1].indexOf("{"))b.payload=c[1]?JSON.parse(c[1]):{};else if(c.length>1){b.vars={};for(var d=c[1].split(com.adtech.HtmlContent.PROPERTY_DELIM),e=0;e<d.length;e++)if(!(d[e].indexOf(com.adtech.HtmlContent.KEY_VALUE_DELIM)<0)){var f=d[e].split(com.adtech.HtmlContent.KEY_VALUE_DELIM);b.vars[f[0]]=f[1]}}return b},com.adtech.Core.prototype.dispatchReadyEvent=function(){if(!this.initialised){this.initialised=!0;for(var a=0;a<this.readyCallbacks.length;a++)"function"==typeof this.readyCallbacks[a]&&this.readyCallbacks[a]();this.readyCallbacks=[],this.addMouseMoveListener(),this.dispatchEvent(com.adtech.RichMediaEvent.READY),this.mraid.dispatchEvent(com.adtech.RichMediaEvent.READY)}},com.adtech.Core.prototype.initEventMetaData=function(a){return a=a||{},a.__mouseX=this.mouseX,a.__mouseY=this.mouseY,a},com.adtech.Core.prototype.isPageLoaded=function(){return this.pageLoaded},com.adtech.Core.prototype.isInitialised=function(){return this.initialised},com.adtech.Core.prototype.event=function(a,b){if(this.useJSONMessageSerialisation()){var c={type:a};b=this.initEventMetaData(b),c.meta=b}else var c=this.constructMessageKeyValuePair("type",a);this.sendMessage(this.constructMessage(com.adtech.HtmlContent.CMD_TYPE_DISPATCH,c))},com.adtech.Core.prototype.contentView=function(){var a={method:"contentView",params:[].slice.call(arguments)};this.sendMessage(this.constructMessage(com.adtech.HtmlContent.CMD_TYPE_EXEC,a))},com.adtech.Core.prototype.contentEvent=function(a,b,c){this.event(void 0!=c&&c&&void 0!=c[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]?a+com.adtech.Advert.CONTENT_SEPARATOR+c[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]+com.adtech.Advert.CONTENT_SEPARATOR+b:a+com.adtech.Advert.CONTENT_SEPARATOR+b)},com.adtech.Core.prototype.childContentEvent=function(a,b,c,d){void 0!=d&&d&&void 0!=d[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]&&void 0!=d[com.adtech.Advert.CONTENT_PROPERTY_PARENT_TRACKING_KEY]&&this.event(a+com.adtech.Advert.CONTENT_SEPARATOR+d[com.adtech.Advert.CONTENT_PROPERTY_PARENT_TRACKING_KEY]+com.adtech.Advert.CONTENT_SEPARATOR+d[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]+com.adtech.Advert.CONTENT_SEPARATOR+c)},com.adtech.Core.prototype.getContentVariable=function(a,b){return void 0!=this.adConfig.contentVariables[a]?this.adConfig.contentVariables[a]:b},com.adtech.Core.prototype.getContent=function(a){return void 0!=this.adConfig.contentProperties&&void 0!=this.adConfig.contentProperties[a]?this.replaceContentPropertyFileValue(this.adConfig.contentProperties[a]):null},com.adtech.Core.prototype.replaceContentPropertyFileValue=function(a){switch(typeof a){case"string":return this.getFileUrl(a);case"object":return this.replaceContentPropertyFileValues(a);default:return a}},com.adtech.Core.prototype.replaceContentPropertyFileValues=function(a){if(com.adtech.Utils.isArray(a)){for(var b=[],c=0;c<a.length;c++)b.push(this.replaceContentPropertyFileValue(a[c]));return b}var d={},e=[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY,com.adtech.Advert.CONTENT_PROPERTY_PARENT_TRACKING_KEY];for(var f in a)if(a.hasOwnProperty(f)){if(com.adtech.Utils.inArray(f,e)){d[f]=a[f];continue}d[f]=this.replaceContentPropertyFileValue(a[f])}return d},com.adtech.Core.prototype.getServicesHosts=function(){return{GET:this.adConfig.servicesHosts[this.adConfig.adServerVars.servingProto],POST:this.adConfig.servicesHosts.post}},com.adtech.Core.prototype.getOffsetX=function(){return this.adConfig.assetContainers.main.contractedX},com.adtech.Core.prototype.getOffsetY=function(){return this.adConfig.assetContainers.main.contractedY},com.adtech.Core.prototype.setReportingIdFromContent=function(a,b,c){var d=a;void 0!=c&&void 0!=c[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]&&(d+=com.adtech.Advert.CONTENT_SEPARATOR+c[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]),d+=com.adtech.Advert.CONTENT_SEPARATOR,d=d.substring(0,d.length-1),this.registerVideoPlayer(b,d)},com.adtech.Core.prototype.click=function(a){this.executeClick(a)},com.adtech.Core.prototype.dynamicClick=function(a,b){this.executeClick(a,b)},com.adtech.Core.prototype.contentClick=function(a,b,c,d){var e;e=void 0!=c&&void 0!=c[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]?a+com.adtech.Advert.CONTENT_SEPARATOR+c[com.adtech.Advert.CONTENT_PROPERTY_TRACKING_KEY]+com.adtech.Advert.CONTENT_SEPARATOR+b:a+com.adtech.Advert.CONTENT_SEPARATOR+b;var f={method:"contentClick",params:[a,c]};this.sendMessage(this.constructMessage(com.adtech.HtmlContent.CMD_TYPE_EXEC,f)),!d&&this.adConfig.dynamic&&this.contentIsDynamic(a,b)&&(d=void 0!=c?c[b]:this.getContent(a)[b]),this.executeClick(e,d)},com.adtech.Core.prototype.contentIsDynamic=function(a,b){if(this.adConfig.adrConfig){var c="baseProperties",d=this.adConfig.adrConfig.map;for(var e in d)if(d.hasOwnProperty(e)&&(e==a||!b&&e==c))for(var f=d[e],g=0,h=f.length;h>g;g++){var i=f[g],j=e==c?a:b;if(i.mapping&&i.mapping[j])return!0}}return!1},com.adtech.Core.prototype.getFileUrl=function(a){for(var b=this.adConfig.adServerVars.assetBaseURL?this.adConfig.adServerVars.assetBaseURL:this.adConfig.adServerVars.baseURL,c=0;c<this.adConfig.assets.length;c++){var d=this.adConfig.assets[c];if(d.name==a)return b+d.url}return a},com.adtech.Core.prototype.getFileUrlById=function(a,b){for(var c=this.adConfig.adServerVars.assetBaseURL?this.adConfig.adServerVars.assetBaseURL:this.adConfig.adServerVars.baseURL,d=0;d<this.adConfig.assets.length;d++){var e=this.adConfig.assets[d];if(e.id==a)return c+e.url}return b},com.adtech.Core.prototype.getGeoValue=function(a,b){var c=this.adConfig.geoData[a];return void 0==c||"_AD"==c.substring(0,3)?b:c},com.adtech.Core.prototype.expand=function(a){this.event("expand",a)},com.adtech.Core.prototype.contract=function(){this.event("contract")},com.adtech.Core.prototype.close=function(){this.event("close")},com.adtech.Core.prototype.show=function(){this.event("show")},com.adtech.Core.prototype.hide=function(){this.event("hide")},com.adtech.Core.prototype.reload=function(){this.event("reload")},com.adtech.Core.prototype.callback=function(a){this.ready(a)},com.adtech.Core.prototype.ready=function(a){this.initialised?a():this.readyCallbacks.push(a)},com.adtech.Core.prototype.getConfigValue=function(a){var b=a.split("."),c=b.length;if(c>0){for(var d=this.adConfig,e=0;c>e;e++)try{d=d[b[e]]}catch(f){}try{{d.toString()}return d}catch(f){}}return""},com.adtech.Core.prototype.getDataFeed=function(a,b,c,d){var e=d||null,f=this.getServicesHosts().GET+"a/proxy/text?url="+encodeURIComponent(b);this.addToDataFeedQueue({name:a,url:f,callback:c,scope:e})},com.adtech.Core.prototype.getPollResults=function(a,b,c){var d=c||null,e=this.getServicesHosts().GET+"a/poll/"+encodeURIComponent(a)+"/"+this.adConfig.canvasId+".json";this.addToDataFeedQueue({name:a,url:e,callback:b,scope:d})},com.adtech.Core.prototype.submitPollResponse=function(a,b,c,d){var e;try{e=JSON.stringify(b)}catch(f){return void this.logError("Failed to serialise poll data: "+f)}var g="pictela_id="+this.adConfig.canvasId+"&poll_name="+a+"&poll_answers="+encodeURIComponent(e);this.xhrArray=this.xhrArray||[],this.pollResponseCallbacks=this.pollResponseCallbacks||[],this.pollResponseCallbacks.push({callback:c,scope:d});var h=this.xhrArray.length,i=this.getServicesHosts().POST+"a/poll.json";if(!window.XDomainRequest||window.XMLHttpRequest&&void 0!=(new window.XMLHttpRequest).responseType){this.xhrArray[h]=new XMLHttpRequest,this.xhrArray[h].open("POST",i,!0),this.xhrArray[h].withCredentials=!0,this.xhrArray[h].setRequestHeader("Content-type","application/x-www-form-urlencoded");var j=this;this.xhrArray[h].onreadystatechange=function(){4===j.xhrArray[h].readyState&&200===j.xhrArray[h].status&&j.pollSubmitResponseHandler()}}else this.xhrArray[h]=new XDomainRequest,this.xhrArray[h].onload=com.adtech.Utils.createClosure(this,this.pollSubmitResponseHandler),this.xhrArray[h].open("POST",i.replace(/^https?:/i,""));this.xhrArray[h].send(g)},com.adtech.Core.prototype.captureData=function(a,b){try{serialisedData=JSON.stringify(a)}catch(c){return void this.logError("Failed to serialise datacapture data: "+c)}if("undefined"==typeof b)a.adtech_canvas_id=this.adConfig.canvasId,a.adtech_flight_id=this.adConfig.adServerVars.id,a.adtech_banner_id=this.adConfig.adServerVars.bannerId,a.adtech_is_preview=this.adConfig.preview,this.sendDataToUrl(this.adConfig.servicesUrl+"capture",a);else{a.pictela_advert_id=this.adConfig.canvasId,a.pictela_flight_id=this.adConfig.adServerVars.id;var d,e=this.getServicesHosts().POST+"a/capture/"+b;!window.XDomainRequest||window.XMLHttpRequest&&void 0!=(new window.XMLHttpRequest).responseType?d=new XMLHttpRequest:(d=new XDomainRequest,e=e.replace(/^https?:/i,"")),d.open("POST",e,!0),d.send(serialisedData)}},com.adtech.Core.prototype.logError=function(){"undefined"!=typeof console&&console.warn("[PTLA]",message)},com.adtech.Core.prototype.addToDataFeedQueue=function(a){this.dataFeedRequestQueue.push(a),this.dataFeedRequestInProcess||this.loadExternalDataFeed(a)},com.adtech.Core.prototype.loadExternalDataFeed=function(a){this.dataFeedRequestInProcess=!0;var b=document.createElement("script"),c=a.url;c.indexOf("?")<0&&(c+="?"),b.src=c+"&callback=ADTECH.externalDataFeedLoadHandler",document.body.appendChild(b)},com.adtech.Core.prototype.checkDataFeedQueue=function(){this.dataFeedRequestQueue.length>0?this.loadExternalDataFeed(this.dataFeedRequestQueue[0]):this.dataFeedRequestInProcess=!1},com.adtech.Core.prototype.logClick=function(a){if(this.useJSONMessageSerialisation())var b={method:"logClick",params:[].slice.call(arguments)};else var b=this.constructMessageKeyValuePair("method","logClick")+this.constructMessageKeyValuePair("params",a);this.sendMessage(this.constructMessage(com.adtech.HtmlContent.CMD_TYPE_EXEC,b))},com.adtech.Core.prototype.executeClick=function(a,b,c){if(a=this.verifyClickIdentifier(a),"undefined"!=typeof this.adConfig.clickthroughs[a]){this.removeMouseMoveListener(),c=this.initEventMetaData(c);var d=this.adConfig.clickthroughs[a],e=this.generateClickUrl(a,b);if(this.logClick(a,b,c),this.env!=com.adtech.HtmlContent.ENVIRONMENT_WEB)return;switch(d.target){case"_self":top.location.href=e;break;default:window.open(e,this.adConfig.adServerVars.uid+ +new Date,d.features)}var f=this;setTimeout(function(){f.addMouseMoveListener()},1e3)}},com.adtech.Core.prototype.generateClickUrl=function(a,b){var c="undefined"!=typeof this.adConfig.adtechDisableClickTracking?!0:!1;if(a=this.verifyClickIdentifier(a),"undefined"!=typeof this.adConfig.clickthroughs[a]){var d=this.adConfig.clickthroughs[a],e="undefined"!=typeof b&&b?b:d.dest;if(!c){e=this.addThirdPartyRedirectsToClickUrl(a,e);var f=this.generateClickRedirectUrl({id:d.id});f&&(e=f+escape(e)),"undefined"!=typeof this.adConfig.pubVars.clickRedirect&&this.adConfig.pubVars.clickRedirect&&(e=this.replaceServerMacros(this.adConfig.pubVars.clickRedirect)+e)}return e}return""},com.adtech.Core.prototype.generateClickRedirectUrl=function(a){var b="";if("undefined"!=typeof this.adConfig.clickRedirect&&this.adConfig.clickRedirect){b=this.adConfig.clickRedirect.replace(/_CLK_ID_/g,a.id);var c=";link=",d=new RegExp(c,"g"),e=com.adtech.Advert.OPT_TRACKING_KEYS;"undefined"!=typeof this.adConfig.tagVars.creativeId&&(b=b.replace(d,";"+e.creativeId+"="+this.adConfig.tagVars.creativeId+c)),"undefined"!=typeof this.adConfig.tagVars.placementId&&(b=b.replace(d,";"+e.placementId+"="+this.adConfig.tagVars.placementId+c))}return b},com.adtech.Core.prototype.verifyClickIdentifier=function(a){return"undefined"!=typeof a&&null!=a&&a?a:"default"},com.adtech.Core.prototype.addThirdPartyRedirectsToClickUrl=function(a,b){for(var c=0;c<this.adConfig.thirdPartyTracking.length;c++){var d=this.adConfig.thirdPartyTracking[c];this.clickMustMakeThirdPartyRequest(d,a)&&d.type==com.adtech.Advert.TRACK_TYPE_REDIRECT&&d.url&&(b=this.replaceServerMacros(d.url)+escape(b))}return b},com.adtech.Core.prototype.replaceServerMacros=function(a){for(var b in this.macroMap)a=a.replace(b,this.macroMap[b]);return a.replace(com.adtech.Advert.MACRO_TIMESTAMP,+new Date)},com.adtech.Core.prototype.clickMustMakeThirdPartyRequest=function(a,b){return a.onEvent==com.adtech.Advert.TRACK_EVENT_CLICKS_ALL||a.onEvent==com.adtech.Advert.TRACK_EVENT_ALL||a.onEvent==com.adtech.Advert.TRACK_EVENT_SPECIFIC_CLICK&&a.eventName==b?!0:!1},com.adtech.Core.prototype.sendDataToUrl=function(a,b,c){c=c||"post";var d=document.createElement("iframe");d.style.display="none",document.body.appendChild(d);var e="pctf_"+Math.random().toString().split(".")[1];d.contentWindow.name=e;var f=document.createElement("form");f.setAttribute("method",c),f.setAttribute("action",a),f.setAttribute("target",e);for(var g in b){var h=document.createElement("input");h.setAttribute("type","hidden"),h.setAttribute("name",g),h.setAttribute("value",b[g]),f.appendChild(h)}document.body.appendChild(f),f.submit()},com.adtech.Core.prototype.externalDataFeedLoadHandler=function(a){var b=this.dataFeedRequestQueue.shift();b.callback.call(b.scope,a),this.checkDataFeedQueue()},com.adtech.Core.prototype.useJSONMessageSerialisation=function(){return this.rmLibVersion&&(this.rmLibVersion.major>2||2==this.rmLibVersion.major&&(this.rmLibVersion.minor>5||5==this.rmLibVersion.minor&&this.rmLibVersion.revision>=6))},com.adtech.Core.prototype.setRmLibVersionInfo=function(){if(this.adConfig.rmLibVersion){var a=this.adConfig.rmLibVersion.split("_");3==a.length&&(this.rmLibVersion={major:parseInt(a[0]),minor:parseInt(a[1]),revision:parseInt(a[2])})}},com.adtech.Core.prototype.coreEventHandler=function(a,b){switch(a){case com.adtech.RichMediaEvent.READY:this.domLoaded&&this.dispatchReadyEvent(),this.configLoaded=!0;break;case com.adtech.RichMediaEvent.PAGE_LOAD:this.pageLoaded=!0,this.dispatchEvent(a);break;default:var c=new com.adtech.RichMediaEvent(a);if("object"==typeof b)for(var d in b)"type"!=d&&b.hasOwnProperty(d)&&(c[d]=b[d]);this.dispatchEvent(c)}},com.adtech.Core.prototype.domLoadHandler=function(){this.configLoaded&&this.dispatchReadyEvent(),this.domLoaded=!0},com.adtech.Core.prototype.postMessageHandler=function(a){var b=this.constructMessageObject(a.data),c=b.vars?b.vars:b.payload;switch(b.cmd){case com.adtech.HtmlContent.CMD_TYPE_INIT:if(c.env)return void(this.env=c.env);this.adConfig="string"==typeof c.adConfig?JSON.parse(c.adConfig):c.adConfig,this.setRmLibVersionInfo(),this.setMacroMap(),this.coreEventHandler(com.adtech.RichMediaEvent.READY);break;case com.adtech.HtmlContent.CMD_TYPE_DISPATCH:this.coreEventHandler(c.type,c);break;case com.adtech.HtmlContent.CMD_TYPE_MRAID:this.mraid.postMessageHandler(b)}},com.adtech.Core.prototype.pollSubmitResponseHandler=function(){if(this.xhrArray){var a=this.pollResponseCallbacks.shift(),b=this.xhrArray.shift(),c=JSON.parse(b.responseText);a.scope?a.callback.call(a.scope,c):a.callback.call(null,c)}},com.adtech.Core.prototype.touchStartHandler=function(){if(this.initialised&&(com.adtech.Utils.removeNativeEventHandler(window.document,"touchstart",this.touchStartHandlerRef),this.useJSONMessageSerialisation())){var a={method:"touchStart",params:[]};this.sendMessage(this.constructMessage(com.adtech.HtmlContent.CMD_TYPE_EXEC,a))}},com.adtech.Core.prototype.mouseMoveHandler=function(a){this.mouseX=a.clientX,this.mouseY=a.clientY},com.adtech.MRAID=function(a){com.adtech.MRAID.supa.constructor.call(this),this.core=a,window.mraid=this},com.adtech.Utils.extend(com.adtech.MRAID,com.adtech.EventDispatcher),com.adtech.MRAID.prototype.addEventListener=function(a,b,c){null!=this.core.rmLibVersion&&this.sendMessage("addEventListener",a),com.adtech.MRAID.supa.addEventListener.call(this,a,b,c)},com.adtech.MRAID.prototype.removeEventListener=function(a,b,c){null!=this.core.rmLibVersion&&this.sendMessage("removeEventListener",a),com.adtech.MRAID.supa.removeEventListener.call(this,a,b,c)},com.adtech.MRAID.prototype.constructMessageValueString=function(a){for(var b=com.adtech.HtmlContent.KEY_VALUE_DELIM,c="",d=0;d<a.length;d++)"object"==typeof a[d]&&(a[d]=JSON.stringify(a[d])),a[d]=escape(a[d]),c+=a[d]+b;return c.substring(c.length-b.length,0)},com.adtech.MRAID.prototype.sendMessage=function(a){var b=[].slice.call(arguments);if(b.shift(),this.core.useJSONMessageSerialisation())var c={method:a,params:b};else var c=this.core.constructMessageKeyValuePair("method",a)+this.core.constructMessageKeyValuePair("params",this.constructMessageValueString(b));this.core.sendMessage(this.core.constructMessage(com.adtech.HtmlContent.CMD_TYPE_MRAID,c))},com.adtech.MRAID.prototype.open=function(a){this.core.click("default",a)},com.adtech.MRAID.prototype.close=function(){switch(this.getPlacementType()){case"interstitial":this.core.close();
break;case"inline":this.core.contract()}},com.adtech.MRAID.prototype.expand=function(){this.core.expand()},com.adtech.MRAID.prototype.resize=function(){this.sendMessage("resize")},com.adtech.MRAID.prototype.setResizeProperties=function(a){this.sendMessage("setResizeProperties",a)},com.adtech.MRAID.prototype.createEvent=function(a,b,c){this.sendMessage("createEvent",a.getTime(),b,c)},com.adtech.MRAID.prototype.createCalendarEvent=function(a){this.sendMessage("createCalendarEvent",a)},com.adtech.MRAID.prototype.makeCall=function(a){this.sendMessage("makeCall",a)},com.adtech.MRAID.prototype.openMap=function(a,b){this.sendMessage("openMap",a,b)},com.adtech.MRAID.prototype.playAudio=function(a,b){this.sendMessage("playAudio",a,b)},com.adtech.MRAID.prototype.playVideo=function(a,b){"object"==typeof b&&this.core.env==com.adtech.HtmlContent.ENVIRONMENT_ORMMA?this.sendMessage("playVideo",a,b):this.sendMessage("playVideo",a)},com.adtech.MRAID.prototype.sendMail=function(a,b,c){this.sendMessage("sendMail",a,b,c)},com.adtech.MRAID.prototype.sendSMS=function(a,b){this.sendMessage("sendSMS",a,b)},com.adtech.MRAID.prototype.storePicture=function(a){this.sendMessage("storePicture",a)},com.adtech.MRAID.prototype.useCustomClose=function(a){this.sendMessage("useCustomClose",a)},com.adtech.MRAID.prototype.setShakeProperties=function(a){var b=["interval","intensity"],c=com.adtech.MRAID.utils.createValidObject(a,b);com.adtech.MRAID.utils.mergeObjects(this.core.adConfig.mraid.shakeProperties,c),this.sendMessage("setShakeProperties",this.core.adConfig.mraid.shakeProperties)},com.adtech.MRAID.prototype.setExpandProperties=function(a){var b=["width","height","useCustomClose"],c=com.adtech.MRAID.utils.createValidObject(a,b);com.adtech.MRAID.utils.mergeObjects(this.core.adConfig.mraid.expandProperties,c),this.sendMessage("setExpandProperties",this.core.adConfig.mraid.expandProperties)},com.adtech.MRAID.prototype.getExpandProperties=function(){return this.core.adConfig.mraid.expandProperties},com.adtech.MRAID.prototype.getResizeProperties=function(){return this.core.adConfig.mraid.resizeProperties},com.adtech.MRAID.prototype.getState=function(){return"undefined"!=typeof this.core.adConfig?this.core.adConfig.mraid.state:"loading"},com.adtech.MRAID.prototype.getShakeProperties=function(){return this.core.adConfig.mraid.shakeProperties},com.adtech.MRAID.prototype.getKeyboard=function(){return this.core.adConfig.mraid.keyboard},com.adtech.MRAID.prototype.getHeading=function(){return this.core.adConfig.mraid.heading},com.adtech.MRAID.prototype.getLocation=function(){return this.core.adConfig.mraid.location},com.adtech.MRAID.prototype.getScreenSize=function(){return this.core.adConfig.mraid.screenSize},com.adtech.MRAID.prototype.getDefaultPosition=function(){return this.core.adConfig.mraid.defaultPosition},com.adtech.MRAID.prototype.getCurrentPosition=function(){return this.core.adConfig.mraid.currentPosition},com.adtech.MRAID.prototype.getNetwork=function(){return this.core.adConfig.mraid.network},com.adtech.MRAID.prototype.getOrientation=function(){return this.core.adConfig.mraid.orientation},com.adtech.MRAID.prototype.getMaxSize=function(){return this.core.adConfig.mraid.maxSize},com.adtech.MRAID.prototype.getSize=function(){return this.core.adConfig.mraid.size},com.adtech.MRAID.prototype.getTilt=function(){return this.core.adConfig.mraid.tilt},com.adtech.MRAID.prototype.getPlacementType=function(){return this.core.adConfig.mraid.placementType},com.adtech.MRAID.prototype.getVersion=function(){return this.core.adConfig.mraid.version},com.adtech.MRAID.prototype.isViewable=function(){return this.core.adConfig.mraid.viewable},com.adtech.MRAID.prototype.supports=function(a){return this.core.adConfig.mraid.supports&&this.core.adConfig.mraid.supports.hasOwnProperty(a)?this.core.adConfig.mraid.supports[a]:void 0},com.adtech.MRAID.prototype.postMessageHandler=function(a){if(this.core.useJSONMessageSerialisation())var b=a.payload.params,c=a.payload.property,d=new com.adtech.RichMediaEvent(a.payload.event);else var b=JSON.parse(unescape(a.vars.params)),c=a.vars.property,d=new com.adtech.RichMediaEvent(a.vars.event);if("object"==typeof b){if(this.core.adConfig.mraid.hasOwnProperty(c)){("object"!=typeof this.core.adConfig.mraid[c]||null===this.core.adConfig.mraid[c])&&(this.core.adConfig.mraid[c]={});for(var e in b)b.hasOwnProperty(e)&&(this.core.adConfig.mraid[c][e]=b[e],d.property(e,b[e]))}}else this.core.adConfig.mraid.hasOwnProperty(c)&&(this.core.adConfig.mraid[c]=b,d.property(c,b));this.dispatchEvent(d)},com.adtech.MRAID.utils={},com.adtech.MRAID.utils.inArray=function(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},com.adtech.MRAID.utils.createValidObject=function(a,b){var c={};for(var d in a)com.adtech.MRAID.utils.inArray(d,b)&&(c[d]=a[d]);return c},com.adtech.MRAID.utils.mergeObjects=function(a,b){for(var c in b)a[c]=b[c]},com.adtech.Core.VIDEO_FIRST_QUARTILE="firstQuartile",com.adtech.Core.VIDEO_MIDPOINT="midpoint",com.adtech.Core.VIDEO_THIRD_QUARTILE="thirdQuartile",com.adtech.Core.QUARTILE_LOGGING_ORDER=[com.adtech.Core.VIDEO_FIRST_QUARTILE,com.adtech.Core.VIDEO_MIDPOINT,com.adtech.Core.VIDEO_THIRD_QUARTILE],com.adtech.Core.VIDEO_RESUME="resume",com.adtech.Core.VIDEO_MUTE="mute",com.adtech.Core.VIDEO_UNMUTE="unmute",com.adtech.Core.VIDEO_EVENTS={play:"Video Start",pause:"Video Pause",ended:"Video Complete",seeked:"Video Seek",replay:"Video Replay"},com.adtech.Core.VIDEO_EVENTS[com.adtech.Core.VIDEO_FIRST_QUARTILE]="Video First Quartile",com.adtech.Core.VIDEO_EVENTS[com.adtech.Core.VIDEO_MIDPOINT]="Video Midpoint",com.adtech.Core.VIDEO_EVENTS[com.adtech.Core.VIDEO_THIRD_QUARTILE]="Video Third Quartile",com.adtech.Core.VIDEO_EVENTS[com.adtech.Core.VIDEO_RESUME]="Video Resume",com.adtech.Core.VIDEO_EVENTS[com.adtech.Core.VIDEO_MUTE]="Video Mute",com.adtech.Core.VIDEO_EVENTS[com.adtech.Core.VIDEO_UNMUTE]="Video Unmute",com.adtech.Core.VIDEO_NATIVE_ATTR_CONTROLS="controls",com.adtech.Core.VIDEO_ID_ATTR_NAME="data-adtech-id",com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME="data-adtech-quartile-position",com.adtech.Core.VIDEO_TIME_ELAPSED_ATTR_NAME="data-adtech-time-elapsed",com.adtech.Core.VIDEO_PAUSED="data-adtech-paused",com.adtech.Core.VIDEO_CLICKED="data-adtech-clicked",com.adtech.Core.VIDEO_MUTE_STATE_ATTR_NAME="data-adtech-mute-state",com.adtech.Core.VIDEO_PLAYED_ONCE_ATTR_NAME="data-adtech-play-once",com.adtech.Core.VIDEO_DISABLE_SEEK_ATTR_NAME="data-adtech-disable-seek-logging",com.adtech.Core.VIDEO_DISABLE_PLAY_LOGGING_ATTR_NAME="data-adtech-disable-play-logging",com.adtech.Core.VIDEO_DISABLE_COMPLETE_LOGGING_ATTR_NAME="data-adtech-disable-complete-logging",com.adtech.Core.prototype.registerVideoPlayer=function(a,b){if(a){var c=com.adtech.Utils.createClosure,d={play:c(this,this.videoEventHandler),pause:c(this,this.videoEventHandler),ended:c(this,this.videoEventHandler),volumechange:c(this,this.videoEventHandler),timeupdate:c(this,this.videoEventHandler),seeked:c(this,this.videoEventHandler),click:c(this,this.videoEventHandler),mousedown:c(this,this.videoEventHandler)};for(var e in d)if(d.hasOwnProperty(e)){var f=d[e];com.adtech.Utils.removeNativeEventHandler(a,e,f),com.adtech.Utils.registerNativeEventHandler(a,e,f)}var g=b?b+" ":"";a.setAttribute(com.adtech.Core.VIDEO_ID_ATTR_NAME,g),a.setAttribute(com.adtech.Core.VIDEO_MUTE_STATE_ATTR_NAME,a.muted.toString()),a.setAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME,"1"),a.setAttribute(com.adtech.Core.VIDEO_PLAYED_ONCE_ATTR_NAME,"0"),a.setAttribute(com.adtech.Core.VIDEO_DISABLE_SEEK_ATTR_NAME,"0"),a.setAttribute(com.adtech.Core.VIDEO_DISABLE_PLAY_LOGGING_ATTR_NAME,"0"),a.setAttribute(com.adtech.Core.VIDEO_DISABLE_COMPLETE_LOGGING_ATTR_NAME,"0")}},com.adtech.Core.prototype.videoEventHandler=function(a){var b=a.target;switch(a.type){case"play":this.checkVideoPlayerStatus(a);break;case"pause":if(b.duration-b.currentTime<=1)return;(null===b.getAttribute(com.adtech.Core.VIDEO_NATIVE_ATTR_CONTROLS)||"1"==b.getAttribute(com.adtech.Core.VIDEO_CLICKED))&&(b.setAttribute(com.adtech.Core.VIDEO_PAUSED,"1"),this.logVideoEvent(b,a.type));break;case"seeked":b.currentTime>.3?"1"!=b.getAttribute(com.adtech.Core.VIDEO_DISABLE_SEEK_ATTR_NAME)&&this.logVideoEvent(b,a.type):this.checkVideoPlayerStatus(a);break;case"ended":if("0"==b.getAttribute(com.adtech.Core.VIDEO_DISABLE_COMPLETE_LOGGING_ATTR_NAME)){for(var c=parseInt(b.getAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME))-1;c<com.adtech.Core.QUARTILE_LOGGING_ORDER.length;)this.logVideoEvent(b,com.adtech.Core.QUARTILE_LOGGING_ORDER[c]),c++;b.setAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME,"4"),b.setAttribute(com.adtech.Core.VIDEO_DISABLE_COMPLETE_LOGGING_ATTR_NAME,"1"),b.setAttribute(com.adtech.Core.VIDEO_PLAYED_ONCE_ATTR_NAME,"1"),b.setAttribute(com.adtech.Core.VIDEO_DISABLE_PLAY_LOGGING_ATTR_NAME,"0"),b.setAttribute(com.adtech.Core.VIDEO_TIME_ELAPSED_ATTR_NAME,"0"),this.logVideoEvent(b,a.type)}break;case"volumechange":this.checkVideoVolumeStatus(a);case"timeupdate":this.videoProgressEventHandler(a);break;case"click":b.setAttribute(com.adtech.Core.VIDEO_CLICKED,"1");break;case"mousedown":b.setAttribute(com.adtech.Core.VIDEO_CLICKED,"0")}},com.adtech.Core.prototype.checkVideoVolumeStatus=function(a){var b=a.target,c=b.muted;b.getAttribute(com.adtech.Core.VIDEO_MUTE_STATE_ATTR_NAME)!=c.toString()&&(this.logVideoEvent(b,c?com.adtech.Core.VIDEO_MUTE:com.adtech.Core.VIDEO_UNMUTE),b.setAttribute(com.adtech.Core.VIDEO_MUTE_STATE_ATTR_NAME,c.toString()))},com.adtech.Core.prototype.checkVideoPlayerStatus=function(a){var b=a.target;b.currentTime<.3?"0"==b.getAttribute(com.adtech.Core.VIDEO_DISABLE_PLAY_LOGGING_ATTR_NAME)&&(b.setAttribute(com.adtech.Core.VIDEO_DISABLE_PLAY_LOGGING_ATTR_NAME,"1"),b.setAttribute(com.adtech.Core.VIDEO_DISABLE_SEEK_ATTR_NAME,"1"),setTimeout(function(){b.setAttribute(com.adtech.Core.VIDEO_DISABLE_SEEK_ATTR_NAME,"0")},500),"1"==b.getAttribute(com.adtech.Core.VIDEO_PLAYED_ONCE_ATTR_NAME)&&(this.logVideoEvent(b,"replay"),b.setAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME,"1"),b.setAttribute(com.adtech.Core.VIDEO_DISABLE_COMPLETE_LOGGING_ATTR_NAME,"0")),this.logVideoEvent(b,"play")):"1"==b.getAttribute(com.adtech.Core.VIDEO_PAUSED)&&(b.setAttribute(com.adtech.Core.VIDEO_PAUSED,"0"),this.logVideoEvent(b,com.adtech.Core.VIDEO_RESUME))},com.adtech.Core.prototype.videoProgressEventHandler=function(a){var b=a.target,c=Math.ceil(b.duration),d=b.getAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME),e=parseInt(b.getAttribute(com.adtech.Core.VIDEO_TIME_ELAPSED_ATTR_NAME)),f=Math.round(b.currentTime);if(isNaN(e)||f>e){b.setAttribute(com.adtech.Core.VIDEO_TIME_ELAPSED_ATTR_NAME,f);var g=Math.round(c/4);f>=1*g&&"1"==d?(b.setAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME,"2"),this.logVideoEvent(b,com.adtech.Core.VIDEO_FIRST_QUARTILE)):f>=2*g&&"2"==d?(b.setAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME,"3"),this.logVideoEvent(b,com.adtech.Core.VIDEO_MIDPOINT)):f>=3*g&&"3"==d&&(b.setAttribute(com.adtech.Core.VIDEO_QUARTILE_POS_ATTR_NAME,"4"),this.logVideoEvent(b,com.adtech.Core.VIDEO_THIRD_QUARTILE))}},com.adtech.Core.prototype.logVideoEvent=function(a,b){if(com.adtech.Core.VIDEO_EVENTS[b]){var c=a.getAttribute(com.adtech.Core.VIDEO_ID_ATTR_NAME)+com.adtech.Core.VIDEO_EVENTS[b];this.event(c)}};var ADTECH=new com.adtech.Core;(function(){/*
 MIT License (c) copyright 2010-2013 B Cavalier & J Hann */
(function(r){function L(){}function x(a,b){return 0==p.call(a).indexOf("[object "+b)}function H(a){return a&&"/"==a.charAt(a.length-1)?a.substr(0,a.length-1):a}function R(a,b){var e,d,u,c;e=1;d=a;"."==d.charAt(0)&&(u=!0,d=d.replace(X,function(a,b,d,u){d&&e++;return u||""}));if(u){u=b.split("/");c=u.length-e;if(0>c)return a;u.splice(c,e);return u.concat(d||[]).join("/")}return d}function B(a){var b=a.indexOf("!");return{f:a.substr(b+1),d:0<=b&&a.substr(0,b)}}function M(){}function w(a,b){M.prototype=
a||m;var e=new M;M.prototype=m;for(var d in b)e[d]=b[d];return e}function F(){function a(a,b,e){d.push([a,b,e])}function b(a,b){for(var e,u=0;e=d[u++];)(e=e[a])&&e(b)}var e,d,u;e=this;d=[];u=function(e,c){a=e?function(a){a&&a(c)}:function(a,b){b&&b(c)};u=L;b(e?0:1,c);b=L;d=k};this.then=function(b,d,u){a(b,d,u);return e};this.resolve=function(a){e.pa=a;u(!0,a)};this.reject=function(a){e.oa=a;u(!1,a)};this.s=function(a){b(2,a)}}function I(a){return a instanceof F||a instanceof s}function v(a,b,e,d){I(a)?
a.then(b,e,d):b(a)}function G(a,b,e){var d;return function(){0<=--a&&b&&(d=b.apply(k,arguments));0==a&&e&&e(d);return d}}function C(){var a,b;q="";a=[].slice.call(arguments);x(a[0],"Object")&&(b=a.shift(),b=J(b));return new s(a[0],a[1],a[2],b)}function J(a,b,e){var d;q="";if(a&&(l.M(a),y=l.a(a),"preloads"in a&&(d=new s(a.preloads,k,e,N,!0),l.j(function(){N=d})),a=a.main))return new s(a,b,e)}function s(a,b,e,d,u){var c;c=l.h(y,k,[].concat(a),u);this.then=this.then=a=function(a,b){v(c,function(b){a&&
a.apply(k,b)},function(a){if(b)b(a);else throw a;});return this};this.next=function(a,b,d){return new s(a,b,d,c)};this.config=J;(b||e)&&a(b,e);l.j(function(){v(u||N,function(){v(d,function(){l.o(c)},e)})})}function S(a){var b,e;b=a.id;b==k&&(O!==k?O={C:"Multiple anonymous defines encountered"}:(b=l.aa())||(O=a));if(b!=k){e=n[b];b in n||(e=l.g(b,y),e=l.w(e.a,b),n[b]=e);if(!I(e))throw Error("duplicate define: "+b);e.da=!1;l.A(e,a)}}function K(){var a=l.Y(arguments);S(a)}var q,y,z,D,A=r.document,P=A&&
(A.head||A.getElementsByTagName("head")[0]),T=P&&P.getElementsByTagName("base")[0]||null,Q={},E={},c={},f="addEventListener"in r?{}:{loaded:1,complete:1},m={},p=m.toString,k,n={},U={},N=!1,O,W=/^\/|^[^:]+:\/\/|^[A-Za-z]:[\\/]/,X=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,Y=/\/\*[\s\S]*?\*\/|\/\/.*?[\n\r]/g,Z=/require\s*\(\s*(["'])(.*?[^\\])\1\s*\)|[^\\]?(["'])/g,$=/\s*,\s*/,V,l;l={k:function(a,b,e){var d;a=R(a,b);if("."==a.charAt(0))return a;d=B(a);a=(b=d.d)||d.f;a in e.c&&(a=e.c[a].I||a);b&&(0>b.indexOf("/")&&
!(b in e.c)&&(a=H(e.K)+"/"+b),a=a+"!"+d.f);return a},h:function(a,b,e,d){function c(b,d){var e,t;e=l.k(b,h.id,a);if(!d)return e;t=B(e);if(!t.d)return e;e=n[t.d];t.f="normalize"in e?e.normalize(t.f,c,h.a)||"":c(t.f);return t.d+"!"+t.f}function g(b,e,g){var t;t=e&&function(a){e.apply(k,a)};if(x(b,"String")){if(t)throw Error("require(id, callback) not allowed");g=c(b,!0);b=n[g];if(!(g in n))throw Error("Module not resolved: "+g);return(g=I(b)&&b.b)||b}v(l.o(l.h(a,h.id,b,d)),t,g)}var h;h=new F;h.id=b||
"";h.ba=d;h.B=e;h.a=a;h.t=g;g.toUrl=function(b){return l.g(c(b,!0),a).url};h.k=c;return h},w:function(a,b,e){var d,c,g;d=l.h(a,b,k,e);c=d.resolve;g=G(1,function(a){d.n=a;try{return l.S(d)}catch(b){d.reject(b)}});d.resolve=function(a){v(e||N,function(){c(n[d.id]=U[d.url]=g(a))})};d.D=function(a){v(e||N,function(){d.b&&(g(a),d.s(E))})};return d},Q:function(a,b,e,d){return l.h(a,e,k,d)},$:function(a){return a.t},F:function(a){return a.b||(a.b={})},Z:function(a){var b=a.p;b||(b=a.p={id:a.id,uri:l.G(a),
exports:l.F(a),config:function(){return a.a}},b.b=b.exports);return b},G:function(a){return a.url||(a.url=l.v(a.t.toUrl(a.id),a.a))},M:function(a){var b,e,d,c,g;b="curl";e="define";d=c=r;if(a&&(g=a.overwriteApi||a.ma,b=a.apiName||a.fa||b,d=a.apiContext||a.ea||d,e=a.defineName||a.ha||e,c=a.defineContext||a.ga||c,z&&x(z,"Function")&&(r.curl=z),z=null,D&&x(D,"Function")&&(r.define=D),D=null,!g)){if(d[b]&&d[b]!=C)throw Error(b+" already exists");if(c[e]&&c[e]!=K)throw Error(e+" already exists");}d[b]=
C;c[e]=K},a:function(a){function b(a,b){var e,d,h,f,k;for(k in a){h=a[k];x(h,"String")&&(h={path:a[k]});h.name=h.name||k;f=c;d=B(H(h.name));e=d.f;if(d=d.d)f=g[d],f||(f=g[d]=w(c),f.c=w(c.c),f.e=[]),delete a[k];d=h;var m=b,n=void 0;d.path=H(d.path||d.location||"");m&&(n=d.main||"./main","."==n.charAt(0)||(n="./"+n),d.I=R(n,d.name+"/"));d.a=d.config;d.a&&(d.a=w(c,d.a));d.N=e.split("/").length;e?(f.c[e]=d,f.e.push(e)):f.l=l.L(h.path,c)}}function e(a){var b=a.c;a.J=new RegExp("^("+a.e.sort(function(a,
d){return b[d].N-b[a].N}).join("|").replace(/\/|\./g,"\\$&")+")(?=\\/|$)");delete a.e}var d,c,g,h;"baseUrl"in a&&(a.l=a.baseUrl);"main"in a&&(a.I=a.main);"preloads"in a&&(a.na=a.preloads);"pluginPath"in a&&(a.K=a.pluginPath);if("dontAddFileExt"in a||a.i)a.i=new RegExp(a.dontAddFileExt||a.i);d=y;c=w(d,a);c.c=w(d.c);g=a.plugins||{};c.plugins=w(d.plugins);c.r=w(d.r,a.r);c.q=w(d.q,a.q);c.e=[];b(a.packages,!0);b(a.paths,!1);for(h in g)a=l.k(h+"!","",c),c.plugins[a.substr(0,a.length-1)]=g[h];g=c.plugins;
for(h in g)if(g[h]=w(c,g[h]),a=g[h].e)g[h].e=a.concat(c.e),e(g[h]);for(h in d.c)c.c.hasOwnProperty(h)||c.e.push(h);e(c);return c},g:function(a,b){var c,d,u,g;c=b.c;u=W.test(a)?a:a.replace(b.J,function(a){d=c[a]||{};g=d.a;return d.path||""});return{a:g||y,url:l.L(u,b)}},L:function(a,b){var c=b.l;return c&&!W.test(a)?H(c)+"/"+a:a},v:function(a,b){return a+((b||y).i.test(a)?"":".js")},H:function(a,b,e){var d=A.createElement("script");d.onload=d.onreadystatechange=function(e){e=e||r.event;if("load"==
e.type||f[d.readyState])delete c[a.id],d.onload=d.onreadystatechange=d.onerror="",b()};d.onerror=function(){e(Error("Syntax or http error: "+a.url))};d.type=a.ja||"text/javascript";d.charset="utf-8";d.async=!a.la;d.src=a.url;c[a.id]=d;P.insertBefore(d,T);return d},T:function(a){var b=[],c;("string"==typeof a?a:a.toSource?a.toSource():a.toString()).replace(Y,"").replace(Z,function(a,l,g,h){h?c=c==h?k:c:c||b.push(g);return""});return b},Y:function(a){var b,c,d,f,g,h;g=a.length;d=a[g-1];f=x(d,"Function")?
d.length:-1;2==g?x(a[0],"Array")?c=a[0]:b=a[0]:3==g&&(b=a[0],c=a[1]);!c&&0<f&&(h=!0,c=["require","exports","module"].slice(0,f).concat(l.T(d)));return{id:b,n:c||[],u:0<=f?d:function(){return d},m:h}},S:function(a){var b;b=a.u.apply(a.m?a.b:k,a.n);b===k&&a.b&&(b=a.p?a.b=a.p.exports:a.b);return b},A:function(a,b){a.u=b.u;a.m=b.m;a.B=b.n;l.o(a)},o:function(a){function b(a,b,c){h[b]=a;c&&p(a,b)}function c(b,d){var e,f,g,h;e=G(1,function(a){f(a);t(a,d)});f=G(1,function(a){p(a,d)});g=l.V(b,a);(h=I(g)&&
g.b)&&f(h);v(g,e,a.reject,a.b&&function(a){g.b&&(a==Q?f(g.b):a==E&&e(g.b))})}function d(){a.resolve(h)}var f,g,h,m,n,p,t;h=[];g=a.B;m=g.length;0==g.length&&d();p=G(m,b,function(){a.D&&a.D(h)});t=G(m,b,d);for(f=0;f<m;f++)n=g[f],n in V?(t(V[n](a),f,!0),a.b&&a.s(Q)):n?c(n,f):t(k,f,!0);return a},W:function(a){l.G(a);l.H(a,function(){var b=O;O=k;!1!==a.da&&(!b||b.C?a.reject(Error(b&&b.C||"define() missing or duplicated: "+a.url)):l.A(a,b))},a.reject);return a},V:function(a,b){var c,d,f,g,h,k,m,p,t,q,r,
s;c=b.k;d=b.ba;f=b.a||y;h=c(a);h in n?k=h:(g=B(h),p=g.f,k=g.d||p,t=l.g(k,f));if(!(h in n))if(s=l.g(p,f).a,g.d)m=k;else if(m=s.moduleLoader||s.ka||s.loader||s.ia)p=k,k=m,t=l.g(m,f);k in n?q=n[k]:t.url in U?q=n[k]=U[t.url]:(q=l.w(s,k,d),q.url=l.v(t.url,t.a),n[k]=U[t.url]=q,l.W(q));k==m&&(g.d&&f.plugins[g.d]&&(s=f.plugins[g.d]),r=new F,v(q,function(a){var b,f,g;g=a.dynamic;p="normalize"in a?a.normalize(p,c,q.a)||"":c(p);f=m+"!"+p;b=n[f];if(!(f in n)){b=l.Q(s,f,p,d);g||(n[f]=b);var h=function(a){g||(n[f]=
a);b.resolve(a)};h.resolve=h;h.reject=h.error=b.reject;a.load(p,b.t,h,s)}r!=b&&v(b,r.resolve,r.reject,r.s)},r.reject));return r||q},aa:function(){var a;if(!x(r.opera,"Opera"))for(var b in c)if("interactive"==c[b].readyState){a=b;break}return a},X:function(a){var b=0,c,d;for(c=A&&(A.scripts||A.getElementsByTagName("script"));c&&(d=c[b++]);)if(a(d))return d},U:function(){var a,b="";(a=l.X(function(a){(a=a.getAttribute("data-curl-run"))&&(b=a);return a}))&&a.setAttribute("data-curl-run","");return b},
O:function(){function a(){l.H({url:d.shift()},b,b)}function b(){q&&(d.length?(l.j(c),a()):c("run.js script did not run."))}function c(a){throw Error(a||"Primary run.js failed. Trying fallback.");}var d=q.split($);d.length&&a()},j:function(a){setTimeout(a,0)}};V={require:l.$,exports:l.F,module:l.Z};C.version="0.8.10";C.config=J;K.amd={plugins:!0,jQuery:!0,curl:"0.8.10"};y={l:"",K:"curl/plugin",i:/\?|\.js\b/,r:{},q:{},plugins:{},c:{},J:/$^/};z=r.curl;D=r.define;z&&x(z,"Object")?(r.curl=k,J(z)):l.M();
(q=l.U())&&l.j(l.O);n.curl=C;n["curl/_privileged"]={core:l,cache:n,config:function(){return y},_define:S,_curl:C,Promise:F}})(this.window||"undefined"!=typeof global&&global||this);
(function(r){function L(){var c;c=q[S]("link");c.rel="stylesheet";c.type="text/css";return c}function x(c,f){c.onload=function(){E.load=E.load||!0;f()}}function H(c,f){c.onerror=function(){E.error=E.error||!0;f()}}function R(c,f,m){A.push({url:c,P:f,R:function(){m(Error(Q))}});(c=M())&&B(c)}function B(c){var f,m;f=A.shift();m=c.styleSheet;f?(c.onload=function(){f.P(f.ca);B(c)},c.onerror=function(){f.R();B(c)},f.ca=m.imports[m.addImport(f.url)]):(c.onload=c.onerror=s,D.push(c))}function M(){var c;
c=D.shift();!c&&z.length<P&&(c=q.createElement("style"),z.push(c),y.appendChild(c));return c}function w(c){var f,m,p;if(!c.href||q.readyState&&"complete"!=q.readyState)return!1;f=!1;try{if(m=c.sheet)p=m.cssRules,f=null===p,!f&&p&&(m.insertRule("-curl-css-test {}",0),m.deleteRule(0),f=!0)}catch(k){f="[object Opera]"!=Object.prototype.toString.call(window.opera)&&/security|denied/i.test(k.message)}return f}function F(c,f,m){E.load||(w(c)?m(c.sheet):c.onload==s||!c.onload||K(function(){F(c,f,m)},f))}
function I(c,f,m){function p(){c.onload!=s&&c.onload&&(c.onload=c.onerror=s,C(function(){m(c.sheet)}))}x(c,p);F(c,f,p)}function v(c,f){H(c,function(){c.onload!=s&&c.onload&&(c.onload=c.onerror=s,f(Error(Q)))})}function G(c,f,m,p){var k;k=L();I(k,p,f);v(k,m);k.href=c;y.appendChild(k)}function C(c){function f(){q.readyState&&"complete"!=q.readyState?K(f,10):c()}f()}function J(c){return c.lastIndexOf(".")<=c.lastIndexOf("/")?c+".css":c}function s(){}var S="createElement",K=r.setTimeout,q=r.document,
y;r=q&&q.createStyleSheet&&!(10<=q.documentMode);var z=[],D=[],A=[],P=12,T,Q="HTTP or network error.",E={};q&&(y=q.head||q.getElementsByTagName("head")[0],T=r?R:G);define("curl/plugin/css",{normalize:function(c,f){var m,p;if(!c)return c;m=c.split(",");p=[];for(var k=0,n=m.length;k<n;k++)p.push(f(m[k]));return p.join(",")},load:function(c,f,m,p){function k(c){1<r.length&&q.push(c);0==--x&&m(1==r.length?c:q)}function n(c){(m.reject||function(c){throw c;})(c)}var q,r,s,x,w;q=[];r=(c||"").split(",");
s=p.cssWatchPeriod||50;p=p.cssNoWait;x=r.length;for(w=0;w<r.length;w++){c=r[w];var v;c=J(f.toUrl(c));p?(v=L(),v.href=c,y.appendChild(v),k(v.sheet||v.styleSheet)):T(c,k,n,s)}},cramPlugin:"../cram/css"})})(this);
}).call(this);

curl({baseUrl:"//secure-ads.pictela.net/rm/lib/richmedia/extensions/",apiName:"require",apiContext:ADTECH});