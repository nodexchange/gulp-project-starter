"use strict";var com=com||{};com.aol=com.aol||{},com.aol.one=com.aol.one||{},com.aol.one.ri=com.aol.one.ri||{};var $1CRI=com.aol.one.ri;$1CRI.utils={aspectRatio:1,getCurrentAspectRatio:function(){return $1CRI.utils.aspectRatio},resizeImagePerRatio:function(t,e,i){var n=0,s=t.width,o=t.height,a="portrait";i>e&&(a="landscape"),"landscape"==a?e>s&&(n=e/s,$1CRI.utils.aspectRatio=n,t.width=e,t.height=o*n,o*=n,s*=n):i>o&&(n=i/o,$1CRI.utils.aspectRatio=n,t.height=i,t.width=s*n,s*=n,o*=n)}},$1CRI.Settings=function(){this.Clickthrough=ADTECH.getContent("Clickthrough","https://ad.doubleclick.net/ddm/clk/300049047;127005073;"),this.Image=ADTECH.getContent("Image",{Source:"images/320x480.jpg",Clickable:"true","Scale to Fit":"true","Default Width":"320","Default Height":"480"}),this.CloseButton=ADTECH.getContent("CloseButton",{top:-18,right:-18,"Close Button Image":"closeButton_100x100.png"}),this.VideoPlayer=ADTECH.getContent("VideoPlayer",{Enabled:"true",Clickable:"true",Clickthrough:"https://ad.doubleclick.net/ddm/clk/300049047;127005073;",Volume:"0.2","MP4 File":"images/Kadjar_10_OPO_070116.mp4","Preview Image":"","End Image":"","Auto Play":!0,Layout:"Fluid||Fixed",Height:170,Width:320,X:0,Y:40,"WEBM File":""})},$1CRI.imageContainer=function(t,e){this.utils=$1CRI.utils;var i=(e.Clickable,e["Default Width"]),n=e["Default Height"],s=e["Scale to Fit"];return this.image=this.createImg(e.Source,i,n),s&&this.utils.resizeImagePerRatio(this.image,t.w,t.h),e.Clickable!==!0&&"true"!==e.Clickable||(this.image.style.cursor="pointer"),this},$1CRI.imageContainer.prototype={setVisible:function(t){t===!0?this.image.style.display="":this.image.style.display="none"},getImage:function(){return this.image},createImg:function(t,e,i){var n=document.createElement("img");return n.src=t,n.width=e,n.height=i,n},updateSize:function(t){this.utils.resizeImagePerRatio(this.image,t.w,t.h)}};var $1CRI=$1CRI||{};$1CRI.smartVideo=$1CRI.smartVideo||{},$1CRI.closeButton=function(t){this.settings=t;var e=this.setupButton();return e},$1CRI.closeButton.prototype={setupButton:function(){var t=document.createElement("img");return t.className="closeButton",t.src=this.settings["Close Button Image"],t.style.position="absolute",t.style.right="4px",t.style.top="4px",t.onclick=function(){},t},clickHandler:function(){ADTECH.close()}};var $1CRI=$1CRI||{};$1CRI.smartVideo=$1CRI.smartVideo||{},$1CRI.smartVideo.core=function(t,e){this.utils=$1CRI.utils,this.videoContainer=document.createElement("div"),this.videoContainer.id="VideoContainer"+1e3*Math.random(),e.appendChild(this.videoContainer),this.settings=t,this.originalWidth=this.settings.Width,this.originalHeight=this.settings.Height,this.currentAspectRatio=1;try{this.setupVideo()}catch(i){console.log("[SMART PLAYER ERROR]"+i)}return this},$1CRI.smartVideo.core.prototype={getVideoContainer:function(){return this.videoContainer},setupVideo:function(){var t=this;ADTECH.registerVideoPlayer(t.videoContainer,"Video"),"Fluid"!==t.settings.Layout&&"Fluid||Fixed"!==t.settings.Layout||(t.settings.Width=t.originalWidth*t.utils.aspectRatio,t.settings.Height=t.originalHeight*t.utils.aspectRatio,t.currentAspectRatio=t.utils.aspectRatio);var e=ADTECH.modules.SmartVideoPlayer.createPlayer({container:t.videoContainer,width:t.settings.Width,height:t.settings.Height,poster:t.settings["Preview Image"],autoplay:!1,src:{mp4:t.settings["MP4 File"],webm:t.settings["WEBM File"]}});t.videoContainer.style.position="absolute","Fluid"===t.settings.Layout||"Fluid||Fixed"===t.settings.Layout?(t.videoContainer.style.left=t.settings.X+"%",t.videoContainer.style.top=t.settings.Y+"%"):(t.videoContainer.style.left=t.settings.X+"px",t.videoContainer.style.top=t.settings.Y+"px"),t.settings["Auto Play"]===!0||"true"===t.settings["Auto Play"]?e.play({auto:!0}):e.pause()},updateSize:function(){var t=this;t.utils.aspectRatio!=t.currentAspectRatio&&(t.currentAspectRatio=t.utils.aspectRatio,t.settings.Width=t.settings.Width*(.9986*t.utils.aspectRatio),t.settings.Height=t.settings.Height*(.9986*t.utils.aspectRatio),console.log(t.videoContainer.firstChild),t.videoContainer.firstChild.style.width=t.settings.Width+"px",t.videoContainer.firstChild.style.height=t.settings.Height+"px")}},$1CRI.core=function(){this.settings=new $1CRI.Settings,this.screenDimensions={},this.addCoreEventListeners(),this.requestViewportDimensions()},$1CRI.core.prototype={init:function(){var t=this;t.container=document.createElement("div"),t.container.style.position="relative",t.container.id="container",document.body.appendChild(t.container);var e=t.getScreenSize();t.backgroundImage=new $1CRI.imageContainer(e,t.settings.Image),t.backgroundImage.getImage().addEventListener("click",function(){t.clickHandler()}),t.container.appendChild(t.backgroundImage.getImage()),t.settings.VideoPlayer.Enabled!==!0&&"true"!==t.settings.VideoPlayer.Enabled||(t.smartPlayer=new $1CRI.smartVideo.core(t.settings.VideoPlayer,t.container));var i=new $1CRI.closeButton(t.container,t.settings.CloseButton);t.container.appendChild(i)},requestViewportDimensions:function(){ADTECH.event("viewport",{type:"request"})},addCoreEventListeners:function(){var t=this;ADTECH.addEventListener("viewport",function(e){"response"===e.meta.type?(t.screenDimensions=e.meta.dims,t.init()):"update"===e.meta.type&&(t.screenDimensions=e.meta.dims,t.backgroundImage.updateSize(t.screenDimensions),t.smartPlayer.updateSize())})},getScreenSize:function(){return this.screenDimensions},clickHandler:function(){ADTECH.dynamicClick("Clickthrough",this.settings.Clickthrough)}},ADTECH.ready(["SmartVideoPlayer/1.1.1/SmartVideoPlayer"],function(){new $1CRI.core});
//# sourceMappingURL=main.min.js.map
