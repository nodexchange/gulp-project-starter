"use strict";var com=com||{};com.aol=com.aol||{},com.aol.one=com.aol.one||{},com.aol.one.ri=com.aol.one.ri||{};var $1CRI=com.aol.one.ri;$1CRI.utils={aspectRatio:1,getCurrentAspectRatio:function(){return $1CRI.utils.aspectRatio},resizeImagePerRatio:function(t,e,i){var n=t.width,s=t.height;console.log(">>> width "+n+" height > "+s+" maxWidth > "+e+" maxHeight > "+i);var o=$1CRI.utils.calculateAspectRatioFit(n,s,e,i);t.width=o.width,t.height=o.height,$1CRI.utils.aspectRatioH=o.height/s,$1CRI.utils.aspectRatioW=o.width/n,console.log($1CRI.utils.aspectRatioH+" > "+$1CRI.utils.aspectRatioW)},calculateAspectRatioFit:function(t,e,i,n){var s=Math.min(i/t,n/e);return{width:t*s,height:e*s}}},$1CRI.Settings=function(){this.Clickthrough=ADTECH.getContent("Clickthrough","https://ad.doubleclick.net/ddm/clk/300049047;127005073;"),this.Image=ADTECH.getContent("Image",{Source:"images/mobileinterstitial_test.png",Clickable:"true","Scale to Fit":"true","Default Width":"1242","Default Height":"2552","Use Image":"true",Color:"#fff"}),this.CloseButton=ADTECH.getContent("CloseButton",{Width:36,Height:36,"Close Button Image":"images/fancybox_sprite.svg"}),this.VideoPlayer=ADTECH.getContent("VideoPlayer",{Enabled:"true",Clickable:"true",Clickthrough:"https://ad.doubleclick.net/ddm/clk/300049047;127005073;",Volume:"0.2","MP4 File":"images/Kadjar_10_OPO_070116.mp4","Preview Image":"","End Image":"","Auto Play":!0,Layout:"Fluid||Fixed",Height:698,Width:1242,X:0,Y:36,"WEBM File":""})},$1CRI.imageContainer=function(t,e){this.utils=$1CRI.utils;var i=e["Default Width"],n=e["Default Height"],s=e["Scale to Fit"];return this.image=this.createImg(e.Source,i,n),"true"==e["Use Image"]||1==e["Use Image"]||(this.image.src="",this.image.style.backgroundColor=e.Color),s&&(console.log("dimensions",t.w,t.h),this.utils.resizeImagePerRatio(this.image,t.w,t.h,t.unit)),e.Clickable!==!0&&"true"!==e.Clickable||(this.image.style.cursor="pointer"),this.image.className="imageContainer",this},$1CRI.imageContainer.prototype={setVisible:function(t){t===!0?this.image.style.display="":this.image.style.display="none"},isClickable:function(){return this.settings.Clickable},getImage:function(){return this.image},createImg:function(t,e,i){var n=document.createElement("img");return n.src=t,n.width=e,n.height=i,n},updateSize:function(t){this.utils.resizeImagePerRatio(this.image,t.w,t.h,t.unit)}},$1CRI.closeButton=function(t){return this.settings=t,this.setupButton(),this},$1CRI.closeButton.prototype={setupButton:function(){this.closeButtonContainer=document.createElement("div"),this.closeButtonContainer.className="closeButton",this.closeButtonContainer.style.left="320px",this.closeButtonContainer.style.top="4px",this.closeButtonContainer.style.position="absolute",this.closeButtonContainer.style.overflow="hidden",this.closeButtonContainer.style.width=this.settings.Width+"px",this.closeButtonContainer.style.height=this.settings.Height+"px";var t=document.createElement("img");return t.src=this.settings["Close Button Image"],this.closeButtonContainer.onclick=this.clickHandler,this.closeButtonContainer.appendChild(t),this.closeButtonContainer},getButton:function(){return this.closeButtonContainer},updatePosition:function(t,e){var i=t-this.settings.Width;this.closeButtonContainer.style.left=i+"px",this.closeButtonContainer.style.top=e+"px"},clickHandler:function(){ADTECH.close()}},$1CRI.smartVideo=$1CRI.smartVideo||{},$1CRI.smartVideo.core=function(t,e){this.utils=$1CRI.utils,this.videoContainer=document.createElement("div"),this.videoContainer.id="VideoContainer"+1e3*Math.random(),this.videoContainer.className="videoContainer",e.appendChild(this.videoContainer),this.settings=t,this.originalWidth=this.settings.Width,this.originalHeight=this.settings.Height,this.currentAspectRatioW=1,this.currentAspectRatioH=1;try{this.setupVideo()}catch(i){console.log("[SMART PLAYER ERROR]"+i)}var n=this;return 1!=t.Clickable&&"true"!=t.Clickable||this.videoContainer.addEventListener("click",function(t){t.target.className.indexOf("vjs-tech")>-1&&1==n.smartPlayer.player.hasStarted_&&ADTECH.dynamicClick("Video Clickthrough",n.settings.Clickthrough),console.log(n.smartPlayer.player.hasStarted_)}),this},$1CRI.smartVideo.core.prototype={getVideoContainer:function(){return this.videoContainer},setupVideo:function(){var t=this;ADTECH.registerVideoPlayer(t.videoContainer,"Video"),"Fluid"!==t.settings.Layout&&"Fluid||Fixed"!==t.settings.Layout||(t.settings.Width=t.originalWidth*t.utils.aspectRatioW,t.settings.Height=t.originalHeight*t.utils.aspectRatioH,t.currentAspectRatioW=t.utils.aspectRatioW,t.currentAspectRatioH=t.utils.aspectRatioH),t.smartPlayer=ADTECH.modules.SmartVideoPlayer.createPlayer({container:t.videoContainer,width:t.settings.Width,height:t.settings.Height,poster:t.settings["Preview Image"],autoplay:t.settings["Auto Play"],src:{mp4:t.settings["MP4 File"],webm:t.settings["WEBM File"]}}),t.videoContainer.style.position="absolute","Fluid"===t.settings.Layout||"Fluid||Fixed"===t.settings.Layout?(t.videoContainer.style.left=t.settings.X+"%",t.videoContainer.style.top=t.settings.Y+"%"):(t.videoContainer.style.left=t.settings.X+"px",t.videoContainer.style.top=t.settings.Y+"px"),t.settings["Auto Play"]===!0||"true"===t.settings["Auto Play"]?t.smartPlayer.play({auto:!0}):t.smartPlayer.pause()},updateSize:function(){var t=this;t.utils.aspectRatioW===t.currentAspectRatioW&&t.utils.aspectRatioH===t.currentAspectRatioH||(t.currentAspectRatioW=t.utils.aspectRatioW,t.currentAspectRatioH=t.utils.aspectRatioH,t.settings.Width=Math.round(t.settings.Width*(1*t.utils.aspectRatioW)),t.settings.Height=Math.round(t.settings.Height*(1*t.utils.aspectRatioH)),t.videoContainer.firstChild.style.width=t.settings.Width+"px",t.videoContainer.firstChild.style.height=t.settings.Height+"px")}},$1CRI.core=function(){this.settings=new $1CRI.Settings,this.screenDimensions={},this.addCoreEventListeners(),this.requestViewportDimensions()},$1CRI.core.prototype={init:function(){var t=this;t.container=document.createElement("div"),t.container.style.position="relative",t.container.id="container";var e="%";t.unitDimensions={w:100,h:100,u:e},document.body.appendChild(t.container);var i=t.getScreenSize();"true"==t.settings.Image["Use Image"]||1==t.settings.Image["Use Image"]?t.backgroundImage=new $1CRI.imageContainer(i,t.settings.Image):t.backgroundImage=new $1CRI.imageContainer(i,t.settings.Image),t.backgroundImage.getImage().addEventListener("click",function(){t.clickHandler()}),t.container.appendChild(t.backgroundImage.getImage()),t.settings.VideoPlayer.Enabled!==!0&&"true"!==t.settings.VideoPlayer.Enabled||(t.smartPlayer=new $1CRI.smartVideo.core(t.settings.VideoPlayer,t.container)),t.closeButton=new $1CRI.closeButton(t.settings.CloseButton),t.container.appendChild(t.closeButton.getButton()),t.closeButton.updatePosition(t.backgroundImage.getImage().width,3);var n=t.container.getBoundingClientRect(),s=t.backgroundImage.getImage().getBoundingClientRect();t.container.style.left=(n.width-s.width)/2+"px",t.container.style.top=0,t.repositionContainer()},requestViewportDimensions:function(){ADTECH.event("viewport",{type:"request"})},addCoreEventListeners:function(){var t=this;ADTECH.addEventListener("viewport",function(e){"response"===e.meta.type?(t.screenDimensions=e.meta.dims,t.init()):"update"===e.meta.type&&(t.screenDimensions=e.meta.dims,t.backgroundImage.updateSize(t.getScreenSize()),t.smartPlayer.updateSize(t.getScreenSize()),t.closeButton.updatePosition(t.backgroundImage.getImage().width,3),t.repositionContainer())})},getScreenSize:function(){return this.screenDimensions.unit=this.unitDimensions,this.screenDimensions},clickHandler:function(){ADTECH.dynamicClick("Clickthrough",this.settings.Clickthrough)},repositionContainer:function(){var t=this,e=t.backgroundImage.getImage().getBoundingClientRect();t.container.style.left=(t.screenDimensions.w-e.width)/2+"px",t.container.style.top=(t.screenDimensions.h-e.height)/2+"px"}},ADTECH.ready(["SmartVideoPlayer/1.1.1/SmartVideoPlayer"],function(){new $1CRI.core});
//# sourceMappingURL=main.min.js.map
