"use strict";var com=com||{};com.aol=com.aol||{},com.aol.one=com.aol.one||{},com.aol.one.ri=com.aol.one.ri||{};var $1CRI=com.aol.one.ri;$1CRI.utils={aspectRatio:1,getCurrentAspectRatio:function(){return $1CRI.utils.aspectRatio},resizeImagePerRatio:function(t,e,i){var n=0,o=t.width,s=t.height;"DIV"==t.nodeName&&(o=t.offsetWidth,s=t.offsetHeight);var a="portrait";if(i>e&&(a="landscape",console.log("[j] landscape")),"landscape"===a);else{if(console.log("[juti] update resize"+t.nodeName),n=i/s,$1CRI.utils.aspectRatio=n,"DIV"==t.nodeName){var r=o*n;console.log("[j]",r),t.style.height=i+"px",t.style.width=r+"px"}else t.height=i,t.width=o*n;o*=n,s*=n}}},$1CRI.Settings=function(){this.Clickthrough=ADTECH.getContent("Clickthrough","https://ad.doubleclick.net/ddm/clk/300049047;127005073;"),this.Image=ADTECH.getContent("Image",{"Use Image":"false",Color:"#000000",Source:"images/320x480.jpg",Clickable:"true","Scale to Fit":"true","Default Width":"320","Default Height":"480"}),this.CloseButton=ADTECH.getContent("CloseButton",{Width:36,Height:36,"Close Button Image":"images/fancybox_sprite.svg"}),this.VideoPlayer=ADTECH.getContent("VideoPlayer",{Enabled:"true",Clickable:"true",Clickthrough:"https://ad.doubleclick.net/ddm/clk/300049047;127005073;",Volume:"0.2","MP4 File":"images/Kadjar_10_OPO_070116.mp4","Preview Image":"","End Image":"","Auto Play":!0,Layout:"Fluid||Fixed",Height:170,Width:320,X:0,Y:40,"WEBM File":""})},$1CRI.imageContainer=function(t,e){this.utils=$1CRI.utils;var i=e["Default Width"],n=e["Default Height"],o=e["Scale to Fit"];return"true"==e["Use Image"]||1==e["Use Image"]?this.image=this.createImg(e.Source,i,n):(console.log("[Juti] settings juti ELSE !!!!!",e,"dimensions !!!!",t),this.image=this.createBgColor(e.Color,i,n)),o&&(console.log("dimensions",t.w,t.h),this.utils.resizeImagePerRatio(this.image,t.w,t.h)),e.Clickable!==!0&&"true"!==e.Clickable||(this.image.style.cursor="pointer"),this.image.className="imageContainer",this},$1CRI.imageContainer.prototype={setVisible:function(t){t===!0?this.image.style.display="":this.image.style.display="none"},isClickable:function(){return this.settings.Clickable},getImage:function(){return console.log("this.image",this.image),this.image},createImg:function(t,e,i){console.log("width",e,"height",i);var n=document.createElement("img");return n.src=t,n.width=e,n.height=i,n},createBgColor:function(t,e,i){var n=document.createElement("div");return n.style.backgroundColor=t,n.style.width=e+"px",n.style.height=i+"px",n},updateSize:function(t){console.log("[juti] dimensions!!!!! ",t),this.utils.resizeImagePerRatio(this.image,t.w,t.h)}},$1CRI.closeButton=function(t){return this.settings=t,this.setupButton(),this},$1CRI.closeButton.prototype={setupButton:function(){this.closeButtonContainer=document.createElement("div"),this.closeButtonContainer.className="closeButton",this.closeButtonContainer.style.left="320px",this.closeButtonContainer.style.top="4px",this.closeButtonContainer.style.position="absolute",this.closeButtonContainer.style.overflow="hidden",this.closeButtonContainer.style.width=this.settings.Width+"px",this.closeButtonContainer.style.height=this.settings.Height+"px";var t=document.createElement("img");return t.src=this.settings["Close Button Image"],this.closeButtonContainer.onclick=this.clickHandler,this.closeButtonContainer.appendChild(t),this.closeButtonContainer},getButton:function(){return this.closeButtonContainer},updatePosition:function(t,e){var i=t-this.settings.Width;this.closeButtonContainer.style.left=i+"px",this.closeButtonContainer.style.top=e+"px"},clickHandler:function(){ADTECH.close()}},$1CRI.smartVideo=$1CRI.smartVideo||{},$1CRI.smartVideo.core=function(t,e){this.utils=$1CRI.utils,this.videoContainer=document.createElement("div"),this.videoContainer.id="VideoContainer"+1e3*Math.random(),this.videoContainer.className="videoContainer",e.appendChild(this.videoContainer),this.settings=t,this.originalWidth=this.settings.Width,this.originalHeight=this.settings.Height,this.currentAspectRatio=1;try{this.setupVideo()}catch(i){console.log("[SMART PLAYER ERROR]"+i)}return this},$1CRI.smartVideo.core.prototype={getVideoContainer:function(){return this.videoContainer},setupVideo:function(){var t=this;ADTECH.registerVideoPlayer(t.videoContainer,"Video"),"Fluid"!==t.settings.Layout&&"Fluid||Fixed"!==t.settings.Layout||(t.settings.Width=t.originalWidth*t.utils.aspectRatio,t.settings.Height=t.originalHeight*t.utils.aspectRatio,t.currentAspectRatio=t.utils.aspectRatio);var e=ADTECH.modules.SmartVideoPlayer.createPlayer({container:t.videoContainer,width:t.settings.Width,height:t.settings.Height,poster:t.settings["Preview Image"],autoplay:!1,src:{mp4:t.settings["MP4 File"],webm:t.settings["WEBM File"]}});t.videoContainer.style.position="absolute","Fluid"===t.settings.Layout||"Fluid||Fixed"===t.settings.Layout?(t.videoContainer.style.left=t.settings.X+"%",t.videoContainer.style.top=t.settings.Y+"%"):(t.videoContainer.style.left=t.settings.X+"px",t.videoContainer.style.top=t.settings.Y+"px"),t.settings["Auto Play"]===!0||"true"===t.settings["Auto Play"]?e.play({auto:!0}):e.pause()},updateSize:function(){var t=this;t.utils.aspectRatio!==t.currentAspectRatio&&(t.currentAspectRatio=t.utils.aspectRatio,t.settings.Width=t.settings.Width*(.9986*t.utils.aspectRatio),t.settings.Height=t.settings.Height*(.9986*t.utils.aspectRatio),t.videoContainer.firstChild.style.width=t.settings.Width+"px",t.videoContainer.firstChild.style.height=t.settings.Height+"px")}},$1CRI.core=function(){this.settings=new $1CRI.Settings,this.screenDimensions={},this.addCoreEventListeners(),this.requestViewportDimensions()},$1CRI.core.prototype={init:function(){var t=this;t.container=document.createElement("div"),t.container.style.position="relative",t.container.id="container",document.body.appendChild(t.container);var e=t.getScreenSize();"true"==t.settings.Image["Use Image"]||1==t.settings.Image["Use Image"]?t.backgroundImage=new $1CRI.imageContainer(e,t.settings.Image):t.backgroundImage=new $1CRI.imageContainer(e,t.settings.Image),t.backgroundImage.getImage().addEventListener("click",function(){t.clickHandler()}),t.container.appendChild(t.backgroundImage.getImage()),t.settings.VideoPlayer.Enabled!==!0&&"true"!==t.settings.VideoPlayer.Enabled||(t.smartPlayer=new $1CRI.smartVideo.core(t.settings.VideoPlayer,t.container)),t.closeButton=new $1CRI.closeButton(t.settings.CloseButton),t.container.appendChild(t.closeButton.getButton()),t.closeButton.updatePosition(t.backgroundImage.getImage().width,3);var i=t.container.getBoundingClientRect(),n=t.backgroundImage.getImage().getBoundingClientRect();t.container.style.left=(i.width-n.width)/2+"px",t.container.style.top=0},requestViewportDimensions:function(){ADTECH.event("viewport",{type:"request"})},addCoreEventListeners:function(){var t=this;ADTECH.addEventListener("viewport",function(e){if("response"===e.meta.type)t.screenDimensions=e.meta.dims,t.init();else if("update"===e.meta.type){t.screenDimensions=e.meta.dims,t.backgroundImage.updateSize(t.screenDimensions),t.smartPlayer.updateSize(),t.closeButton.updatePosition(t.backgroundImage.getImage().width,3);var i=t.backgroundImage.getImage().getBoundingClientRect();t.container.style.left=(t.screenDimensions.w-i.width)/2+"px"}})},getScreenSize:function(){return this.screenDimensions},clickHandler:function(){ADTECH.dynamicClick("Clickthrough",this.settings.Clickthrough)}},ADTECH.ready(["SmartVideoPlayer/1.1.1/SmartVideoPlayer"],function(){new $1CRI.core});
//# sourceMappingURL=main.min.js.map
